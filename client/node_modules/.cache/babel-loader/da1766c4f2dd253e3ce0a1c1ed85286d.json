{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lvn/Desktop/expensetracker-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/lvn/Desktop/expensetracker-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/lvn/Desktop/expensetracker-backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/lvn/Desktop/expensetracker-backend/client/src/context/GlobalState.js\";\n\nimport React, { createContext, useReducer } from 'react';\nimport AppReducer from './AppReducer';\nimport axios from 'axios'; //initialize state\n\nvar initialState = {\n  transactions: [],\n  error: null,\n  loading: true\n}; //create context\n\nexport var GlobalContext = createContext(initialState); //provider components\n\nexport var GlobalProvider = function GlobalProvider(_ref) {\n  var children = _ref.children;\n\n  var _useReducer = useReducer(AppReducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1]; //actions\n\n\n  function getTransactions() {\n    return _getTransactions.apply(this, arguments);\n  }\n\n  function _getTransactions() {\n    _getTransactions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('/api/v1/transactions');\n\n            case 3:\n              res = _context.sent;\n              dispatch({\n                type: 'GET_TRANSACTIONS',\n                payload: res.data.data\n              });\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              dispatch({\n                type: 'TRANSACTION_ERROR',\n                payload: _context.t0.response.data.error\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n    return _getTransactions.apply(this, arguments);\n  }\n\n  function addTransaction(_x) {\n    return _addTransaction.apply(this, arguments);\n  }\n\n  function _addTransaction() {\n    _addTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(transaction) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch({\n                type: 'ADD_TRANSACTION',\n                payload: transaction\n              });\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _addTransaction.apply(this, arguments);\n  }\n\n  function deleteTransaction(_x2) {\n    return _deleteTransaction.apply(this, arguments);\n  }\n\n  function _deleteTransaction() {\n    _deleteTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.delete(\"/api/v1/transactions/\".concat(id));\n\n            case 3:\n              dispatch({\n                type: 'DELETE_TRANSACTION',\n                payload: id\n              });\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              dispatch({\n                type: 'DELETE_TRANSACTION',\n                payload: _context3.t0.response.data.error\n              });\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n    return _deleteTransaction.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(GlobalContext.Provider, {\n    value: {\n      transactions: state.transactions,\n      error: state.error,\n      loading: state.loading,\n      getTransactions: getTransactions,\n      deleteTransaction: deleteTransaction,\n      addTransaction: addTransaction\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, children);\n};","map":{"version":3,"sources":["/Users/lvn/Desktop/expensetracker-backend/client/src/context/GlobalState.js"],"names":["React","createContext","useReducer","AppReducer","axios","initialState","transactions","error","loading","GlobalContext","GlobalProvider","children","state","dispatch","getTransactions","get","res","type","payload","data","response","addTransaction","transaction","deleteTransaction","id","delete"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,aAAf,EAA8BC,UAA9B,QAA+C,OAA/C;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAIA;;AACA,IAAMC,YAAY,GAAC;AACfC,EAAAA,YAAY,EAAC,EADE;AAEfC,EAAAA,KAAK,EAAE,IAFQ;AAGfC,EAAAA,OAAO,EAAE;AAHM,CAAnB,C,CAMA;;AACA,OAAO,IAAMC,aAAa,GAAGR,aAAa,CAACI,YAAD,CAAnC,C,CACP;;AAEA,OAAO,IAAMK,cAAc,GAAE,SAAhBA,cAAgB,OAAgB;AAAA,MAAdC,QAAc,QAAdA,QAAc;;AACzC,oBAA0BT,UAAU,CAACC,UAAD,EAAaE,YAAb,CAApC;AAAA;AAAA,MAAOO,KAAP;AAAA,MAAcC,QAAd,mBADyC,CAGzC;;;AAHyC,WAK1BC,eAL0B;AAAA;AAAA;;AAAA;AAAA,gFAKzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAE0BV,KAAK,CAACW,GAAN,CAAU,sBAAV,CAF1B;;AAAA;AAEcC,cAAAA,GAFd;AAGQH,cAAAA,QAAQ,CAAC;AACLI,gBAAAA,IAAI,EAAE,kBADD;AAELC,gBAAAA,OAAO,EAAEF,GAAG,CAACG,IAAJ,CAASA;AAFb,eAAD,CAAR;AAHR;AAAA;;AAAA;AAAA;AAAA;AAQQN,cAAAA,QAAQ,CAAC;AACLI,gBAAAA,IAAI,EAAE,mBADD;AAELC,gBAAAA,OAAO,EAAE,YAAIE,QAAJ,CAAaD,IAAb,CAAkBZ;AAFtB,eAAD,CAAR;;AARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KALyC;AAAA;AAAA;;AAAA,WAqB1Bc,cArB0B;AAAA;AAAA;;AAAA;AAAA,+EAqBzC,kBAA8BC,WAA9B;AAAA;AAAA;AAAA;AAAA;AAEIT,cAAAA,QAAQ,CAAC;AACLI,gBAAAA,IAAI,EAAE,iBADD;AAELC,gBAAAA,OAAO,EAAEI;AAFJ,eAAD,CAAR;;AAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KArByC;AAAA;AAAA;;AAAA,WA6B3BC,iBA7B2B;AAAA;AAAA;;AAAA;AAAA,kFA6B1C,kBAAiCC,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEcpB,KAAK,CAACqB,MAAN,gCAAqCD,EAArC,EAFd;;AAAA;AAGQX,cAAAA,QAAQ,CAAC;AACRI,gBAAAA,IAAI,EAAE,oBADE;AAERC,gBAAAA,OAAO,EAAEM;AAFD,eAAD,CAAR;AAHR;AAAA;;AAAA;AAAA;AAAA;AAQSX,cAAAA,QAAQ,CAAC;AACLI,gBAAAA,IAAI,EAAE,oBADD;AAELC,gBAAAA,OAAO,EAAE,aAAIE,QAAJ,CAAaD,IAAb,CAAkBZ;AAFtB,eAAD,CAAR;;AART;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7B0C;AAAA;AAAA;;AA+CzC,sBAAQ,oBAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAE;AACnCD,MAAAA,YAAY,EAACM,KAAK,CAACN,YADgB;AAEnCC,MAAAA,KAAK,EAAEK,KAAK,CAACL,KAFsB;AAGnCC,MAAAA,OAAO,EAAEI,KAAK,CAACJ,OAHoB;AAInCM,MAAAA,eAAe,EAAfA,eAJmC;AAKnCS,MAAAA,iBAAiB,EAAjBA,iBALmC;AAMnCF,MAAAA,cAAc,EAAdA;AANmC,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQHV,QARG,CAAR;AAUH,CAzDM","sourcesContent":["import React, {createContext, useReducer} from 'react';\nimport AppReducer from './AppReducer';\nimport axios from 'axios';\n\n\n\n//initialize state\nconst initialState={\n    transactions:[],\n    error: null,\n    loading: true\n}\n\n//create context\nexport const GlobalContext = createContext(initialState);\n//provider components\n\nexport const GlobalProvider =({children}) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n\n    //actions\n\n    async function getTransactions(){\n        try{\n            const res = await axios.get('/api/v1/transactions');\n            dispatch({\n                type: 'GET_TRANSACTIONS',\n                payload: res.data.data\n            });\n        }catch (err){\n            dispatch({\n                type: 'TRANSACTION_ERROR',\n                payload: err.response.data.error\n            });\n        }\n    }\n\n\n    async function addTransaction(transaction){\n        \n        dispatch({\n            type: 'ADD_TRANSACTION',\n            payload: transaction\n        });\n    }\n\n   async function deleteTransaction(id){\n       try{\n           await axios.delete(`/api/v1/transactions/${id}`);\n           dispatch({\n            type: 'DELETE_TRANSACTION',\n            payload: id\n        });\n       }catch (err){\n            dispatch({\n                type: 'DELETE_TRANSACTION',\n                payload: err.response.data.error\n            });\n        }\n    }\n\n\n\n\n    return (<GlobalContext.Provider value={{\n        transactions:state.transactions,\n        error: state.error,\n        loading: state.loading,\n        getTransactions,\n        deleteTransaction,\n        addTransaction\n    }}>\n        {children}\n    </GlobalContext.Provider>)\n}\n\n"]},"metadata":{},"sourceType":"module"}